<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>torrentor | file browser</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/files/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    {%load tags_extra %}
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/files/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/files/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/files/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/files/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/files/ico/apple-touch-icon-57-precomposed.png">
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="/files/js/bootstrap.js"></script>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="/">
          <img src="/files/img/torrentor_logo.png" style="position:absolute;height:30px;left:1px;top:1px;"/>
          &nbsp;Torrentor
        </a>
        {%if user%} 
        <div class="pull-right">
          <ul class="nav pull-right">
            <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">Welcome, {{user.username}} <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/accounts/preferences"><i class="icon-cog"></i> Preferences</a></li>
                <li><a href="/help/support"><i class="icon-envelope"></i> Contact Support</a></li>
                <li class="divider"></li>
                <li><a href="/accounts/logout"><i class="icon-off"></i> Logout</a></li>
              </ul>
            </li>
          </ul>
        </div>
        {%else%}
        <a type="button" class="btn pull-right" href="/login"><i class="icon-user"></i> Guest</a>
        {%endif%}
        <div class="nav-collapse">
        <ul class="nav">
          <li><a href="/">Downloads</a></li>
          <li class="active"><a href="/browse/home">Library</a></li>
          <li><a href="/newslog">NewsLog</a></li>
        </ul>
        </div>
      </div>
      </div>
    </div>
    <div class="container">
      <ul class="breadcrumb">
        <li><a href="/browse/home">Home</a> <span class="divider">/</span></li>
        {% for k,v in from.items %}
        <li><a href="{{v}}">{{k}}</a> <span class="divider">/</span></li>
        {% endfor %}
        <li>.</li>
      </ul>

      <div class="well">
        <form id="searchForm" method="post" action="/search/{{current}}/" enctype="multipart/form-data">{% csrf_token %}
          <input name="query" value="{{q}}" type="text" placeholder="Search in {{current}}/" style="width:95%;"/>
        </form>
        {% if pmax > 1 %}
        <div class="pagination pagination-centered pagination-small">
          <ul>
            {%if page == 1%}
              <li class="disabled"><a><i class="icon-chevron-left"></i></a></li>
            {%else%}
              <li><a href="/browse/{{current}}/page:{{page|add:"-1"}}/"><i class="icon-chevron-left"></i></a></li>
            {%endif%}
          {% for p in pages %}
            {%if p == page%}
              <li class="active"><a href="/browse/{{current}}/page:{{p}}/">{{p}}</a></li>
            {%else%}
              {% if p < 5 or p > page|add:"-3" and p < page|add:"3" or p > pmax|add:"-5" %}
                <li><a href="/browse/{{current}}/page:{{p}}/">{{p}}</a></li>
              {%else%}
                {% if p == 5 or p == page|add:"-3" and p == page|add:"3" or p == pmax|add:"-5" %}
                  <li><a href="#">...</a></li>
                {%endif%}
              {%endif%}
            {%endif%}
          {% endfor%}
            {%if page == pmax%}
              <li class="disabled"><a><i class="icon-chevron-right"></i></a></li>
            {%else%}
              <li><a href="/browse/{{current}}/page:{{page|add:"1"}}/"><i class="icon-chevron-right"></i></a></li>
            {%endif%}
          </ul>
        </div> 
        {%endif%}
        {%if q%}
          <h4>Search Results for <i>"{{q}}":</i></h4>
        {%else%}
          <h4>index of /{{current}}</h4>
        {%endif%}
        <table class="table table-striped">
        {% for key,file in to.items %}
        <tr>
          <td>
            {{key|safe}}
          </td>
          <td>
          {% if user.username != "guest" %}
          {%if key|ext in "mkv avi" %}
          <!--<a href="/convert/{{file}}">
            <span class="label label-warning"><i class="icon-refresh icon-white"></i> Convert</span>-->
            <a href="http://torrentor.zapto.org:942/{{file}}">
            <span class="label label-inverse"><i class="icon-download icon-white"></i> Download</span></a>
          </a>
          {%elif key|ext in "mp4 ogg m4v"%}
          <a href="/browse/{{file}}">
            <span class="label label-success"><i class="icon-play icon-white"></i> Watch</span>
          </a>
          {%elif key|ext in "mp3"%}
          <a href="/browse/{{file}}">
            <span class="label label-success"><i class="icon-play icon-white"></i> Play</span>
          </a>
          {%elif key|ext in "jpg png html srt html jpeg gif pdf nfo txt"%}
          <a href="/browse/{{file}}">
            <span class="label label-success"><i class="icon-file icon-white"></i> Open</span>
          </a>
          {%elif file|isdir%}
          <a href="/browse/{{file}}">
            <span class="label label-success"><i class="icon-folder-open icon-white"></i> List</span>
          </a>
          {%elif file|isconv%}
            <span class="label label-info"><i class="icon-refresh icon-white"></i> Converting</span>
          {%else%}  
          <a href="http://torrentor.zapto.org:942/{{current}}/{{key}}">
            <span class="label label-inverse"><i class="icon-download icon-white"></i> Download</span></a>
          {%endif%}  
          {%endif%}  
          </td>
        </tr>
        {% endfor %}
        </table>
          
      </div>
      <!-- Example row of columns -->
      <hr>

      <footer>
        <p>&copy; Can Bülbül 2012</p>
      </footer>

    </div> <!-- /container -->

  </body>
</html>
